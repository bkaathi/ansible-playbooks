.TH emcgrab.sh 1
.SH NAME
emcgrab.sh - EMC Data Collection Utility for Unix

.SH SYNOPSIS
emcgrab.sh [options]
.SH DESCRIPTION
.B emcgrab
is a series of shell scripts to facilitate
the collection of host based data, including configurations of 
.B Symmetrix 
and 
.B CLARiiON
attached disk arrays.
.PP
The filesystem on which EMCGrab has been installed should have at least 100Mb of free space, however this will be dependant on the modules being invoked,
as some, such as 
.B ecc
may require additional space during operation, for the temporary collection of files.  If EMCGrab detects less than 25Mb of space remaining between
each Module, then it will terminate.
.PP
After the data has been collected, an output file will be generated in the
.B outputs
sub-directory.  This filename is in the format
.PP
.B emcgrab_full_<yyyy-mm-dd-hh.mm.ss>_<OS>_<hostname>_CC<CaseNumber>.tar.<Z|gz>

.SH SUPPORTED PLATFORMS
.br 
: Sun Solaris 2.6 or later.
.br 
: AIX 4.2 or later.
.br 
: HPUX 10.20 or later.
.br 
: RedHat Linuxi 7.x or later.
.br 
: RedHat Advanced / Enterprise Server 2.1 or later. 
.br 
: Suse Linux 7.x or later.
.br 
: HP Tru64 4.x or later.
.br 
: Silicon Graphics IRIX 6.5.x or later.
.br 
: Siemens Reliant Unix 5.4.x or later.

.SH OPTIONS
.TP 5
.B -v
Display version information.
.TP 5
.B -help
Display summary help information.
.TP 5
.B ?
Same as 
.B -help.
.TP 5
.B -man
View the emcgrab.sh manual page.  Alternatively this can be viewed using
.B man -M <EMCGrab directory/man> emcgrab.sh
.TP 5
.B -autoexec
Automatically execute, bypassing all interactive prompts.  Useful for automatic operation, such as when invoked by cron.
.TP 5
.B -backup
Similar to -autoexec, but sets Clarify case ID to <Backup>.  Useful when using EMCGrab to take snapshots of host configurations.
.TP 5
.B -quiet
Suppress all status / processing messages from the active terminal / console session.
.TP 5
.B -case
Case Number.  Must be enclosed in double quotes (" ").
.TP 5
.B -customer
Company Name.  Must be enclosed in double quotes (" ").
.TP 5
.B -contact
Contact Name. Must be enclosed in double quotes (" ").
.TP 5
.B -phone
Contact Phone Number. Must be enclosed in double quotes (" ").
.TP 5
.B -email
Contact Email Address.  Must be enclosed in double quotes (" ").
.TP 5
.B -o
Include additional modules.  See MODULES for a full list of currently supported modules.

.TP 5
.B -clariionIP
Superceeded.  See 
.B -ip
.TP 5
.B -ip <a.b.c.d,w.x.y.z>
Comma seperated list of IP addresses (in dot notation) for SP interfaces of attached
.B CLARiiON
Storage arrays.  Must be used in conjunction with 
.B -o clariion.
For example,
.B -ip 10.10.1.1,10.10.1.2
.PP
.SH MODULES
The following modules will be configured to run automatically, depending on whether the respective software is installed on the host, 
based on the default package names.  If the package name has been changed, due to internal software distribution processes, 
then detection of that software may fail.  In this instance, modules can be invoked using the option 
.B
-o <module name>
.PP
EMCGrab will automatically remove any duplicate modules, for example those entered via the command line, and automatically detected as being installed.
.TP 5
.B host (Host Specific Information) 
(run by default)
.IP
Gathers host based information through collection of log files and outputs of system commands.  The module name is the same as the output generated by 
.B uname -s,
for example SunOS, HP-UX.
.TP 5
.B pp (EMC PowerPath) 
(Automatically detected : AIX, HP-UX, SunOS, Linux)
.IP
Gathers configuration information and status of Powerpath configuration, including Powerpath Volume Manager if utilised.
.br
.TP 5
.B se (Solutions Enabler) 
(run by default on supported OS platforms)
.IP
Requires Solutions Enabler to be installed.  Collects log files, and gathers configuration data
for all local and remotely configured storage arrays. 
.IP
If no gatekeepers are assigned to the host, then EMCGrab will prompt whether you wish to continue running Solutions Enabler commands.  If 
.B -autoexec
is defined and no gatekeepers detected, then Solutions Enabler commands will be skipped. 
.IP 
Only symapi log files modified in the previous 14 days will be collected.

.TP 5
.B clariion (NAVICLI)
(Automatically detected : AIX, HP-UX, SunOS & Linux)
.IP
Gathers information relating to 
.B CLARiiON
configuration and associated log files from each locally attached array from each SP interface. 
.IP
EMCGrab will attempt to automatically detect the IP addresses, however IP addresses can be defined manually on the command line with the 
.B -ip
option.  Any duplicate IP addresses will be ignored.

.TP 5
.B vxvm (Veritas Volume Manager) 
(Automatically detected : AIX, HP-UX, SunOS & Linux)
.IP
Gathers information relating to Volume Manager configuration, including disk groups, disks and logical volumes.

.TP 5
.B vcs (Veritas Cluster Server) 
(Automatically detected : AIX, HPUX, SunOS & Linux)
.IP
Gathers information relating to Cluster configuration, including status and associated log files.  Will also gather Geospan configuration data if applicable.

.TP 5
.B inq (SCSI Inquiry Utility)
(run by default)
.IP
Gathers scsi inquiry data for all attached storage devices, in both short and extended formats.

.TP 5
.B sc (Sun Cluster)
(Automatically detected : SunOS)
.IP
Gathers information relating to Cluster configuration, including status and associated log files.

.TP 5
.B sg (HP-UX Service Guard)
(Automatically detected : HP-UX)
.IP
Gathers information relating to Cluster configuration, including status and associated log files.

.TP 5
.B hacmp (AIX HACMP Cluster)
(Automatically detected : AIX)
.IP
Gathers cluster log files.

.TP 5
.B svm (Solaris Volume Manager aka DiskSuite)
(run by default - Solaris environments only)
.IP
Gathers information relating to Volume Manager configuration, meta-databases, meta-devices and disk set information.

.TP 5
.B ecc (EMC Control Center)
(Optional)
.IP
Gathers configuration data for all agents installed on the host, and their respective log files if modified within the previous 14 days for 4.x & 5.x.
If selected, and the default installation directory does not exist, then depending on whether 
.B -autoexec
is enabled you will be prompted for the installation path.

.TP 5
.B sdmm (EMC Symmetrix Data Mobility Manager)
(Optional)
.IP
Copies configuration and log files for both versions 1.5 and 2.x.  If selected, and the default installation directory does not exist, then
depending on whether
.B -autoexec
is enabled you will be prompted for the installation path.

.TP 5
.B dru (EMC Open Migrator/LM)
(Automatically detected : AIX, HPUX, SunOS) 
.IP
Gathers configuration data and log files, as well as status of all configured sessions, whether active or inactive.

.TP 5
.B im (InfoMover)
(Optional)
.IP
High Level module to invoke both InfoMover File Transfer (IFT) and InfoMover File Server (IFS) modules.  See details for each module below.  
If only one InfoMover component is installed, then this can be configured, by using the respective module namem such as 
.B ift
or
.B ifs.
.TP 5
.B ift (EMC InfoMover File Transfer)
(Optional)
.IP
Gathers configuration data and log files relating to the File Transfer component of InfoMover.
.TP 5
.B ifs (EMC InfoMover File Server)
(Optional)
.IP
Gathers configuration data and log files relating to the File Server component of InfoMover.

.SH KNOWN ISSUES
.TP 5
HP-UX
.br
If BCV and / or RDF2 devices are presented to the host, and they are in a Not-Ready state, then ioscan may timeout.
.PP
.SH EXAMPLES
To invoke both the InfoMover File Transfer and ECC modules 
.PP
.IP 
.B emcgrab.sh -o ift,ecc
.PP
To invoke support for Clariion with IP addresses 10.10.1.1 and 10.10.2.2
.IP
.B emcgrab.sh -o clariion -ip 10.10.1.1,10.10.2.2
.PP
To configure EMCGrab to run hands-off, for example when scheduling via cron in backup mode.
.IP
.B emcgrab.sh -autoexec 
.PP 
If you wish to include contact details whilst running with 
.B -autoexec
.IP
.B emcgrab.sh -autoexec -case 12345678 -customer '"EMC Corporation"' -contact '"John Smith"' -email '"john.smith@domain.com"' -phone '"+123 123 456"'
.IP 
All values should be enclosed within double quotes (" ").
.PP
.SH RETURN CODES
.IP
0 - Success
.br
1 - Failed to source emcgrab.main
.br
2 - Unable to create temporary working directory
.br
3 - EMCGrab Data Collection already running.  Only a single instance per host is supported at any time.
.br
4 - Script Aborted.  Less than 25Mb of space detected on FileSystem.
.br
5 - Failed to create output tarfile
.br
6 - Override for non 'root' user operation failed.
.br
7 - File and directory dependencies not found.

.PP
.SH COPYRIGHT
EMC Corporation (2002-2005)
